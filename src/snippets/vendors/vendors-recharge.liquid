<!-- Subscriptions Powered by ReCharge Payments: Begin Liquid Code -->

<script>
  // Subscriptions Powered by ReCharge Payments: JavaScript
  (function() {
    function reChargeGetCookie(name) {
        return (document.cookie.match('(^|; )' + name + '=([^;]*)')||0)[2];
      }
    function reChargeBuildCheckoutURL() {
      // Build the Checkout URL
      var myshopify_domain = '{{ shop.permanent_domain }}';
      var token = reChargeGetCookie('cart');
      try {
        // Cross-domain tracking with Google Analytics
        var ga_linker = ga.getAll()[0].get('linkerParam');
      } catch (e) {
        // 'ga' is not available
        var ga_linker = '';
      }
      // Customer email address for use in the Checkout URL
      var customer_param = '{% if customer %}customer_id={{ customer.id }}&customer_email={{ customer.email }}{% endif %}';
      var checkout_url = 'https://checkout.paleo-on-the-go-sandbox.com/r/checkout?myshopify_domain=' + myshopify_domain + '&cart_token=' + token + '&' + ga_linker + '&' + customer_param
      return checkout_url;
    }
    window.Recharge = window.Recharge || {};
    window.Recharge.checkoutUrl = reChargeBuildCheckoutURL();
  })();
</script>
