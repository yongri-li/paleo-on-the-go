"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = _default;

var _vueTemplateCompiler = require("vue-template-compiler");

var _vueInbrowserCompilerUtils = require("vue-inbrowser-compiler-utils");

function _default(code, jsxInExamples) {
  // In case we are loading a vue component as an example, extract script tag
  if ((0, _vueInbrowserCompilerUtils.isCodeVueSfc)(code)) {
    var parts = (0, _vueTemplateCompiler.parseComponent)(code);
    return parts && parts.script ? parts.script.content : '';
  } // if in JSX mode or litteral return examples code as is


  if (jsxInExamples || /new Vue\(/.test(code)) {
    return code;
  }

  if (/\n\W+?export\W+default\W/.test(code) || /\n\W+?module.exports(\W+)?=/.test(code)) {
    return code;
  } //else it could be the weird almost jsx of vue-styleguidist


  return /^</.test(code.trim()) ? '' : code.split(/\n[\t ]*</)[0];
}